---
import i18next, { changeLanguage } from "i18next";
import Article from "@/components/Article.astro";
import { getCollection, CollectionEntry } from "astro:content";
import { filenameToDateString } from "@/util";

changeLanguage("ja");

export async function getStaticPaths() {
  const kijis = await getCollection(
    "kiji",
    ({ data }) => data.language === i18next.language
  );
  return kijis.map((post) => ({
    params: {
      slug: filenameToDateString(post.slug),
    },
    props: post,
  }));
}
type Props = CollectionEntry<"kiji">;
const kiji = Astro.props;
---

<Article {...kiji} />
